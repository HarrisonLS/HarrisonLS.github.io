# 原型链相关

![prototype](/image/javascript/prototype/prototype.png)

## this 的几种情况

1. 作为普通函数执行时，this 指向 window。
2. 当函数作为对象的方法被调用时，this 就会指向该对象。
3. 构造器调用，this 指向返回的这个对象。
4. 箭头函数 箭头函数的 this 绑定看的是 this 所在函数定义在哪个对象下，就绑定哪个对象。如果有嵌套的情况，则 this 绑定到最近的一层对象上。
5. 基于 Function.prototype 上的 apply 、 call 和 bind 调用模式，这三个方法都可以显示的指定调用函数的 this 指向。apply 接收参数的是数组，call 接受参数列表，bind 方法通过传入一个对象，返回一个 this 绑定了传入对象的新函数。这个函数的 this 指向除了使用 new 时会被改变，其他情况下都不会改变。若为空默认是指向全局对象 window。

## new 运算符的实现机制

1. 首先创建了一个新的空对象
2. 设置原型，将对象的原型设置为函数的 prototype 对象。
3. 让函数的 this 指向这个对象，执行构造函数的代码（为这个新对象添加属性）
4. 判断函数的返回值类型，如果是值类型，返回创建的对象。如果是引用类型，就返回这个引用类型的对象。

## 原型链
- 实例对象的__proto__指向其构造函数的prototype
- 如果实例对象本身没有一个属性，会去逐层__proto__中寻找

## 相关文章
